<div align="center">
  <img src="https://i-blog.csdnimg.cn/direct/8abea218c2804256a17cc8f2d6c81630.jpeg" width="150" >
  <h1><strong>ç„åŒ 765</strong></h1>
  <p><strong>å¤§è¯­è¨€æ¨¡å‹ (LLM) å¼€å‘å·¥ç¨‹å¸ˆ | ä¸­å›½ä¼ åª’å¤§å­¦ Â· æ•°å­—åª’ä½“æŠ€æœ¯ï¼ˆæ™ºèƒ½äº¤äº’ä¸æ¸¸æˆè®¾è®¡ï¼‰</strong></p>
  <p>
    <a href="https://blog.csdn.net/Yunyi_Chi" target="_blank" style="text-decoration: none;">
      <span style="background-color: #f39c12; color: white; padding: 2px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; display: inline-block;">CSDN Â· ä¸ªäººä¸»é¡µ |</span>
    </a>
    <a href="https://github.com/xt765" target="_blank" style="text-decoration: none; margin-left: 8px;">
      <span style="background-color: #24292e; color: white; padding: 2px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; display: inline-block;">GitHub Â· Follow</span>
    </a>
  </p>
</div>

---

### **å…³äºä½œè€…**

- **æ·±è€•é¢†åŸŸ**ï¼šå¤§è¯­è¨€æ¨¡å‹å¼€å‘ / RAG çŸ¥è¯†åº“ / AI Agent è½åœ° / æ¨¡å‹å¾®è°ƒ
- **æŠ€æœ¯æ ˆ**ï¼šPython | RAG (LangChain / Dify + Milvus) | FastAPI + Docker
- **å·¥ç¨‹èƒ½åŠ›**ï¼šä¸“æ³¨æ¨¡å‹å·¥ç¨‹åŒ–éƒ¨ç½²ã€çŸ¥è¯†åº“æ„å»ºä¸ä¼˜åŒ–ï¼Œæ“…é•¿å…¨æµç¨‹è§£å†³æ–¹æ¡ˆ

> **ã€Œè®© AI äº¤äº’æ›´æ™ºèƒ½ï¼Œè®©æŠ€æœ¯è½åœ°æ›´é«˜æ•ˆã€**
> æ¬¢è¿æŠ€æœ¯æ¢è®¨ä¸é¡¹ç›®åˆä½œï¼Œè§£é”å¤§æ¨¡å‹ä¸æ™ºèƒ½äº¤äº’çš„æ— é™å¯èƒ½ï¼

---
# FinchBot (é›€ç¿) - ä¸€ä¸ªçœŸæ­£çµæ´»çš„ AI Agent æ¡†æ¶
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/89e72e3b66ff4adc8ab8aa90400385ef.png)


> ä½œè€…ï¼šç„åŒ765 (xt765)
> é¡¹ç›®åœ°å€ï¼š[GitHub - FinchBot](https://github.com/xt765/finchbot)
> å›½å†…é•œåƒï¼š[Gitee - FinchBot](https://gitee.com/xt765/finchbot)


## æ‘˜è¦

FinchBot (é›€ç¿) æ˜¯ä¸€ä¸ªè½»é‡çº§ã€æ¨¡å—åŒ–çš„ AI Agent æ¡†æ¶ï¼ŒåŸºäº **LangChain v1.2** å’Œ **LangGraph v1.0** æ„å»ºã€‚å®ƒä¸æ˜¯åˆä¸€ä¸ªç®€å•çš„ LLM å°è£…ï¼Œè€Œæ˜¯ä¸€ä¸ªæ·±æ€ç†Ÿè™‘çš„æ¶æ„è®¾è®¡ï¼Œä¸“æ³¨äºä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š

1. **å¦‚ä½•è®© Agent çš„èƒ½åŠ›æ— é™æ‰©å±•ï¼Ÿ** - é€šè¿‡æŠ€èƒ½ (Skill) å’Œå·¥å…· (Tool) çš„åŒå±‚æ‰©å±•æœºåˆ¶
2. **å¦‚ä½•è®© Agent æ‹¥æœ‰çœŸæ­£çš„è®°å¿†ï¼Ÿ** - é€šè¿‡åŒå±‚å­˜å‚¨æ¶æ„ + Agentic RAG
3. **å¦‚ä½•è®© Agent çš„è¡Œä¸ºå¯å®šåˆ¶ï¼Ÿ** - é€šè¿‡åŠ¨æ€æç¤ºè¯æ–‡ä»¶ç³»ç»Ÿ

æœ¬æ–‡å°†æ·±å…¥å‰–æ FinchBot çš„æ¶æ„è®¾è®¡ï¼Œå¸¦ä½ äº†è§£ä¸€ä¸ªç”Ÿäº§çº§ Agent æ¡†æ¶çš„è¯ç”Ÿè¿‡ç¨‹ã€‚

---

## ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹© FinchBotï¼Ÿ

åœ¨ AI Agent æ¡†æ¶ç™¾èŠ±é½æ”¾çš„ä»Šå¤©ï¼Œä½ å¯èƒ½ä¼šé—®ï¼šä¸ºä»€ä¹ˆè¿˜éœ€è¦ FinchBotï¼Ÿ

### 1.1 ç°æœ‰æ¡†æ¶çš„ç—›ç‚¹

|         ç—›ç‚¹         | ä¼ ç»Ÿæ–¹æ¡ˆ                | FinchBot æ–¹æ¡ˆ                   |
| :------------------: | :---------------------- | :------------------------------ |
|  **æ‰©å±•å›°éš¾**  | éœ€è¦ä¿®æ”¹æ ¸å¿ƒä»£ç         | ç»§æ‰¿åŸºç±»æˆ–åˆ›å»º Markdown æ–‡ä»¶    |
|  **è®°å¿†è„†å¼±**  | ä¾èµ– LLM ä¸Šä¸‹æ–‡çª—å£     | åŒå±‚æŒä¹…åŒ–å­˜å‚¨ + è¯­ä¹‰æ£€ç´¢       |
| **æç¤ºè¯åƒµåŒ–** | ç¡¬ç¼–ç åœ¨ä»£ç ä¸­          | æ–‡ä»¶ç³»ç»Ÿï¼Œçƒ­åŠ è½½                |
|  **æ¶æ„è¿‡æ—¶**  | åŸºäº LangChain æ—§ç‰ˆ API | LangChain v1.2 + LangGraph v1.0 |

### 1.2 FinchBot çš„è®¾è®¡å“²å­¦

```mermaid
graph TD
    %% è®¾è®¡å“²å­¦èŠ‚ç‚¹
    Privacy[éšç§ä¼˜å…ˆ]
    Modularity[æ¨¡å—åŒ–]
    Dev_Experience[å¼€å‘è€…å‹å¥½]
    Stability[ç”Ÿäº§çº§ç¨³å®š]
    Out_of_Box[å¼€ç®±å³ç”¨]

    %% ç»†èŠ‚
    Privacy --> Local_Embedding(æœ¬åœ° Embedding)
    Privacy --> No_Cloud_Upload(æ•°æ®ä¸ä¸Šäº‘)
    
    Modularity --> Factory_Pattern(å·¥å‚æ¨¡å¼)
    Modularity --> Decoupled(ç»„ä»¶è§£è€¦)
    
    Dev_Experience --> Type_Safety(ç±»å‹å®‰å…¨)
    Dev_Experience --> Docs(æ–‡æ¡£å®Œå–„)
    
    Stability --> Thread_Safe(åŒé‡æ£€æŸ¥é”)
    Stability --> Retry(è‡ªåŠ¨é‡è¯•)
    Stability --> Timeout(è¶…æ—¶æ§åˆ¶)
    
    Out_of_Box --> Zero_Config(é›¶é…ç½®å¯åŠ¨)
    Out_of_Box --> Auto_Fallback(è‡ªåŠ¨é™çº§)
    Out_of_Box --> Rich_CLI(å¯Œæ–‡æœ¬ç•Œé¢)

    %% æ ·å¼
    classDef main fill:#e1f5fe,stroke:#01579b,stroke-width:2px;
    classDef sub fill:#fff9c4,stroke:#fbc02d,stroke-width:1px;
    
    class Privacy,Modularity,Dev_Experience,Stability,Out_of_Box main
    class Local_Embedding,No_Cloud_Upload,Factory_Pattern,Decoupled,Type_Safety,Docs,Thread_Safe,Retry,Timeout,Zero_Config,Auto_Fallback,Rich_CLI sub
```

### 1.3 å¼€ç®±å³ç”¨ä½“éªŒ

FinchBot å°† **"å¼€ç®±å³ç”¨"** ä½œä¸ºæ ¸å¿ƒè®¾è®¡ç†å¿µâ€”â€”æ— éœ€å¤æ‚é…ç½®å³å¯ä¸Šæ‰‹ï¼š

**ä¸‰æ­¥å¿«é€Ÿä¸Šæ‰‹ï¼š**

```bash
# ç¬¬ä¸€æ­¥ï¼šé…ç½® API å¯†é’¥å’Œé»˜è®¤æ¨¡å‹
uv run finchbot config

# ç¬¬äºŒæ­¥ï¼šç®¡ç†ä½ çš„ä¼šè¯
uv run finchbot sessions

# ç¬¬ä¸‰æ­¥ï¼šå¼€å§‹å¯¹è¯
uv run finchbot chat
```

|          ç‰¹æ€§          | è¯´æ˜                                                                         |
| :---------------------: | :--------------------------------------------------------------------------- |
|   **ä¸‰æ­¥ä¸Šæ‰‹**   | `config` â†’ `sessions` â†’ `chat`ï¼Œä¸‰ä¸ªå‘½ä»¤å®Œæˆå®Œæ•´å·¥ä½œæµç¨‹             |
| **ç¯å¢ƒå˜é‡é…ç½®** | æ‰€æœ‰é…ç½®å‡å¯é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®ï¼ˆ`OPENAI_API_KEY`ã€`ANTHROPIC_API_KEY` ç­‰ï¼‰ |
| **Rich CLI ç•Œé¢** | å…¨å±é”®ç›˜å¯¼èˆªï¼Œâ†‘/â†“ ç®­å¤´é€‰æ‹©ï¼Œäº¤äº’å¼æ“ä½œ                                     |
|  **i18n å›½é™…åŒ–**  | å†…ç½®ä¸­è‹±æ–‡æ”¯æŒï¼Œè‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿè¯­è¨€                                             |
|   **è‡ªåŠ¨é™çº§**   | ç½‘é¡µæœç´¢è‡ªåŠ¨é™çº§ï¼šTavily â†’ Brave â†’ DuckDuckGo                              |
|  **é›¶é…ç½®å¯åŠ¨**  | åªéœ€è®¾ç½® API Keyï¼Œè¿è¡Œ `finchbot chat` å³å¯                                |

---

## äºŒã€æ¶æ„è®¾è®¡ï¼šæ¨¡å—åŒ–ä¸å·¥å‚æ¨¡å¼

FinchBot é‡‡ç”¨å·¥å‚æ¨¡å¼ (Factory Pattern) æ¥æå‡ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

### 2.1 æ ¸å¿ƒç»„ä»¶å…³ç³»

```mermaid
graph TD
    %% æ ·å¼å®šä¹‰
    classDef core fill:#e1f5fe,stroke:#01579b,stroke-width:2px;
    classDef factory fill:#fff9c4,stroke:#fbc02d,stroke-width:2px;
    classDef memory fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px;
    classDef tools fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px;
    classDef user fill:#ffebee,stroke:#c62828,stroke-width:2px;

    %% ç”¨æˆ·äº¤äº’å±‚
    User([ç”¨æˆ·]) --> CLI[å‘½ä»¤è¡Œç•Œé¢]
    class User user
    class CLI user

    %% å·¥å‚å±‚
    subgraph Factory_Layer [å·¥å‚å±‚]
        AgentFactory[Agent Factory]
        ToolFactory[Tool Factory]
    end
    class AgentFactory,ToolFactory factory

    CLI --> AgentFactory
    AgentFactory --> Agent
    AgentFactory --> ToolFactory
    ToolFactory --> ToolSet

    %% æ ¸å¿ƒå±‚
    subgraph Agent_Core [Agent æ ¸å¿ƒ]
        Agent[Agent å¤§è„‘]
        ContextBuilder[ä¸Šä¸‹æ–‡æ„å»ºå™¨]
        SystemPrompt[ç³»ç»Ÿæç¤ºè¯]
        
        Agent --> ContextBuilder
        ContextBuilder --> SystemPrompt
    end
    class Agent,ContextBuilder,SystemPrompt core

    %% è®°å¿†ç³»ç»Ÿ
    subgraph Memory_System [è®°å¿†ç³»ç»Ÿ]
        MemoryMgr[è®°å¿†ç®¡ç†å™¨]
        SQLite[(SQLite å­˜å‚¨)]
        Vector[(å‘é‡å­˜å‚¨)]
        Sync[æ•°æ®åŒæ­¥]
        
        MemoryMgr --> Retrieval[æ£€ç´¢æœåŠ¡]
        MemoryMgr --> Classification[è‡ªåŠ¨åˆ†ç±»]
        Retrieval --> SQLite
        Retrieval --> Vector
        SQLite <--> Sync <--> Vector
    end
    class MemoryMgr,SQLite,Vector,Sync,Retrieval,Classification memory

    Agent --> MemoryMgr

    %% å·¥å…·ç³»ç»Ÿ
    subgraph Tool_Ecosystem [å·¥å…·ç”Ÿæ€]
        ToolSet[å·¥å…·é›†]
        ToolRegistry[å·¥å…·æ³¨å†Œè¡¨]
        
        ToolSet --> ToolRegistry
        ToolRegistry --> File[æ–‡ä»¶æ“ä½œ]
        ToolRegistry --> Web[ç½‘ç»œæœç´¢]
        ToolRegistry --> Shell[Shell æ‰§è¡Œ]
        ToolRegistry --> Custom[è‡ªå®šä¹‰æŠ€èƒ½]
    end
    class ToolSet,ToolRegistry,File,Web,Shell,Custom tools

    Agent --> ToolSet
```

### 2.2 Agent Factory

`AgentFactory` è´Ÿè´£ç»„è£…ä¸€ä¸ªå®Œæ•´çš„ Agent å®ä¾‹ã€‚å®ƒå±è”½äº†å¤æ‚çš„åˆå§‹åŒ–ç»†èŠ‚ï¼ˆå¦‚ Checkpointer çš„åˆ›å»ºã€LLM æ¨¡å‹çš„é…ç½®ã€å·¥å…·é“¾çš„ç»„è£…ï¼‰ï¼Œå¯¹å¤–æä¾›ç®€æ´çš„åˆ›å»ºæ¥å£ã€‚

```python
# ç°åœ¨çš„åˆ›å»ºæ–¹å¼ç®€æ´æ˜äº†
agent, checkpointer, tools = AgentFactory.create_for_cli(
    session_id=session_id,
    workspace=ws_path,
    model=chat_model,
    config=config_obj,
)
```

### 2.3 Tool Factory

`ToolFactory` é›†ä¸­ç®¡ç†æ‰€æœ‰å·¥å…·çš„å®ä¾‹åŒ–é€»è¾‘ã€‚å®ƒä¸ä»…è´Ÿè´£åˆ›å»ºå·¥å…·ï¼Œè¿˜è´Ÿè´£å¤„ç†å·¥å…·ä¹‹é—´çš„ä¾èµ–å…³ç³»å’Œè‡ªåŠ¨é™çº§é€»è¾‘ã€‚

ä¾‹å¦‚ï¼Œ**ç½‘é¡µæœç´¢å·¥å…·çš„è‡ªåŠ¨é™çº§** å°±æ˜¯åœ¨å·¥å‚ä¸­å®ç°çš„ï¼š

```python
# ToolFactory å†…éƒ¨é€»è¾‘
def _create_web_search_tool(self):
    # 1. å°è¯•ä½¿ç”¨ Tavily (æœ€ä½³è´¨é‡)
    if self.config.tavily_api_key:
        return WebSearchTool(engine="tavily", ...)
    
    # 2. å°è¯•ä½¿ç”¨ Brave (éšç§ä¼˜å…ˆ)
    if self.config.brave_api_key:
        return WebSearchTool(engine="brave", ...)
        
    # 3. é»˜è®¤ä½¿ç”¨ DuckDuckGo (æ— éœ€ Key)
    return WebSearchTool(engine="duckduckgo", ...)
```

---

## ä¸‰ã€è®°å¿†æ¶æ„ï¼šåŒå±‚å­˜å‚¨ + Agentic RAG

FinchBot å®ç°äº†å…ˆè¿›çš„**åŒå±‚è®°å¿†æ¶æ„**ï¼Œå½»åº•è§£å†³äº† LLM ä¸Šä¸‹æ–‡çª—å£é™åˆ¶å’Œé•¿æœŸè®°å¿†é—å¿˜é—®é¢˜ã€‚

### 3.1 ä¸ºä»€ä¹ˆæ˜¯ Agentic RAGï¼Ÿ

|      å¯¹æ¯”ç»´åº¦      | ä¼ ç»Ÿ RAG     | Agentic RAG (FinchBot)      |
| :----------------: | :----------- | :-------------------------- |
| **æ£€ç´¢è§¦å‘** | å›ºå®šæµç¨‹     | Agent è‡ªä¸»å†³ç­–              |
| **æ£€ç´¢ç­–ç•¥** | å•ä¸€å‘é‡æ£€ç´¢ | æ··åˆæ£€ç´¢ + æƒé‡åŠ¨æ€è°ƒæ•´     |
| **è®°å¿†ç®¡ç†** | è¢«åŠ¨å­˜å‚¨     | ä¸»åŠ¨ remember/recall/forget |
| **åˆ†ç±»èƒ½åŠ›** | æ—            | è‡ªåŠ¨åˆ†ç±» + é‡è¦æ€§è¯„åˆ†       |
| **æ›´æ–°æœºåˆ¶** | å…¨é‡é‡å»º     | å¢é‡åŒæ­¥                    |

### 3.2 åŒå±‚å­˜å‚¨æ¶æ„

```mermaid
flowchart TB
    subgraph Business[ä¸šåŠ¡å±‚]
        MM[MemoryManager]
    end
  
    subgraph Storage[å­˜å‚¨å±‚]
        SQLite[SQLiteStore<br/>çœŸç›¸æº]
        Vector[VectorMemoryStore<br/>è¯­ä¹‰æ£€ç´¢]
    end
  
    subgraph Services[æœåŠ¡å±‚]
        RS[RetrievalService<br/>æ··åˆæ£€ç´¢]
        CS[ClassificationService<br/>è‡ªåŠ¨åˆ†ç±»]
        IS[ImportanceScorer<br/>é‡è¦æ€§è¯„åˆ†]
        DS[DataSyncManager<br/>æ•°æ®åŒæ­¥]
    end
  
    MM --> RS
    MM --> CS
    MM --> IS
  
    RS --> SQLite
    RS --> Vector
  
    SQLite <--> DS <--> Vector
```

1.  **ç»“æ„åŒ–å±‚ (SQLite)**: äº‹å®æ¥æº (Source of Truth)ï¼Œå­˜å‚¨å®Œæ•´æ–‡æœ¬ã€å…ƒæ•°æ®ã€åˆ†ç±»å’Œé‡è¦æ€§è¯„åˆ†ã€‚
2.  **è¯­ä¹‰å±‚ (Vector Store)**: åŸºäº ChromaDB + FastEmbedï¼Œæä¾›æ¨¡ç³Šæ£€ç´¢å’Œè”æƒ³èƒ½åŠ›ã€‚

### 3.3 æ··åˆæ£€ç´¢ç­–ç•¥

FinchBot é‡‡ç”¨**åŠ æƒ RRF (Weighted Reciprocal Rank Fusion)** ç­–ç•¥ï¼Œæ™ºèƒ½èåˆå…³é”®è¯æ£€ç´¢å’Œè¯­ä¹‰æ£€ç´¢çš„ç»“æœã€‚ç³»ç»Ÿä¼šæ ¹æ®æŸ¥è¯¢ç±»å‹ï¼ˆå¦‚äº‹å®å‹ã€æ¦‚å¿µå‹ã€æ¨¡ç³Šå‹ï¼‰è‡ªåŠ¨è°ƒæ•´ä¸¤è€…çš„æƒé‡ï¼Œç¡®ä¿æ£€ç´¢ç»“æœæ—¢å‡†ç¡®åˆå…¨é¢ã€‚

```python
class QueryType(StrEnum):
    """æŸ¥è¯¢ç±»å‹ï¼Œå†³å®šæ£€ç´¢æƒé‡"""
    KEYWORD_ONLY = "keyword_only"      # çº¯å…³é”®è¯ (1.0/0.0)
    SEMANTIC_ONLY = "semantic_only"    # çº¯è¯­ä¹‰ (0.0/1.0)
    FACTUAL = "factual"                # äº‹å®å‹ (0.8/0.2)
    CONCEPTUAL = "conceptual"          # æ¦‚å¿µå‹ (0.2/0.8)
    COMPLEX = "complex"                # å¤æ‚å‹ (0.5/0.5)
    AMBIGUOUS = "ambiguous"            # æ­§ä¹‰å‹ (0.3/0.7)
```

---

## å››ã€åŠ¨æ€æç¤ºè¯ç³»ç»Ÿï¼šç”¨æˆ·å¯ç¼–è¾‘çš„ Agent å¤§è„‘

FinchBot çš„æç¤ºè¯ç³»ç»Ÿé‡‡ç”¨**æ–‡ä»¶ç³»ç»Ÿ + æ¨¡å—åŒ–ç»„è£…**çš„è®¾è®¡ï¼Œè®©ç”¨æˆ·å¯ä»¥è‡ªç”±å®šåˆ¶ Agent çš„è¡Œä¸ºã€‚

### 4.1 Bootstrap æ–‡ä»¶ç³»ç»Ÿ

```
~/.finchbot/
â”œâ”€â”€ SYSTEM.md           # è§’è‰²è®¾å®š
â”œâ”€â”€ MEMORY_GUIDE.md     # è®°å¿†ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ SOUL.md             # çµé­‚è®¾å®šï¼ˆæ€§æ ¼ç‰¹å¾ï¼‰
â”œâ”€â”€ AGENT_CONFIG.md     # Agent é…ç½®
â””â”€â”€ workspace/
    â””â”€â”€ skills/         # è‡ªå®šä¹‰æŠ€èƒ½
```

### 4.2 æç¤ºè¯åŠ è½½æµç¨‹

```mermaid
flowchart TD
    A[Agent å¯åŠ¨] --> B[åŠ è½½ Bootstrap æ–‡ä»¶]
    B --> C[SYSTEM.md]
    B --> D[MEMORY_GUIDE.md]
    B --> E[SOUL.md]
    B --> F[AGENT_CONFIG.md]
  
    C --> G[ç»„è£…æç¤ºè¯]
    D --> G
    E --> G
    F --> G
  
    G --> H[åŠ è½½å¸¸é©»æŠ€èƒ½]
    H --> I[æ„å»ºæŠ€èƒ½æ‘˜è¦ XML]
    I --> J[ç”Ÿæˆå·¥å…·æ–‡æ¡£]
    J --> K[æ³¨å…¥è¿è¡Œæ—¶ä¿¡æ¯]
    K --> L[å®Œæ•´ç³»ç»Ÿæç¤º]
  
    L --> M[å‘é€ç»™ LLM]
```

---

## äº”ã€æŠ€èƒ½ä¸å·¥å…·ï¼šæ— é™æ‰©å±•çš„ Agent èƒ½åŠ›

FinchBot çš„æ‰©å±•æ€§å»ºç«‹åœ¨ä¸¤ä¸ªå±‚æ¬¡ä¸Šï¼š**å·¥å…·å±‚ (Tool)** å’Œ **æŠ€èƒ½å±‚ (Skill)**ã€‚

### 5.1 å·¥å…·ç³»ç»Ÿï¼šä»£ç çº§èƒ½åŠ›æ‰©å±•

å·¥å…·æ˜¯ Agent ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’çš„æ¡¥æ¢ã€‚FinchBot æä¾›äº† 11 ä¸ªå†…ç½®å·¥å…·ï¼Œå¹¶æ”¯æŒè½»æ¾æ‰©å±•ã€‚

#### ç½‘é¡µæœç´¢ï¼šä¸‰å¼•æ“é™çº§è®¾è®¡

FinchBot çš„ç½‘é¡µæœç´¢å·¥å…·é‡‡ç”¨å·§å¦™çš„**ä¸‰å¼•æ“è‡ªåŠ¨é™çº§æœºåˆ¶**ï¼Œå…¼é¡¾çµæ´»æ€§å’Œå¼€ç®±å³ç”¨ä½“éªŒï¼š

| ä¼˜å…ˆçº§ |          å¼•æ“          | API Key | ç‰¹ç‚¹                             |
| :----: | :--------------------: | :-----: | :------------------------------- |
|   1   |    **Tavily**    |  éœ€è¦  | è´¨é‡æœ€ä½³ï¼Œä¸“ä¸º AI ä¼˜åŒ–ï¼Œæ·±åº¦æœç´¢ |
|   2   | **Brave Search** |  éœ€è¦  | å…è´¹é¢åº¦å¤§ï¼Œéšç§å‹å¥½             |
|   3   |  **DuckDuckGo**  |  æ— éœ€  | å§‹ç»ˆå¯ç”¨ï¼Œé›¶é…ç½®                 |

è¿™ä¸ªè®¾è®¡ç¡®ä¿**å³ä½¿æ²¡æœ‰ä»»ä½• API Key é…ç½®ï¼Œç½‘é¡µæœç´¢ä¹Ÿèƒ½å¼€ç®±å³ç”¨**ï¼

### 5.2 æŠ€èƒ½ç³»ç»Ÿï¼šç”¨ Markdown å®šä¹‰ Agent èƒ½åŠ›

æŠ€èƒ½æ˜¯ FinchBot çš„ç‹¬ç‰¹åˆ›æ–°â€”â€”**ç”¨ Markdown æ–‡ä»¶å®šä¹‰ Agent çš„èƒ½åŠ›è¾¹ç•Œ**ã€‚

#### æœ€å¤§ç‰¹è‰²ï¼šAgent è‡ªåŠ¨åˆ›å»ºæŠ€èƒ½

FinchBot å†…ç½®äº† **skill-creator** æŠ€èƒ½ï¼Œè¿™ä¹Ÿæ˜¯å¼€ç®±å³ç”¨ç†å¿µçš„ä½“ç°ï¼š

> **åªéœ€å‘Šè¯‰ Agent ä½ æƒ³è¦ä»€ä¹ˆæŠ€èƒ½ï¼ŒAgent å°±ä¼šè‡ªåŠ¨åˆ›å»ºå¥½ï¼**

```
ç”¨æˆ·: å¸®æˆ‘åˆ›å»ºä¸€ä¸ªç¿»è¯‘æŠ€èƒ½ï¼Œå¯ä»¥æŠŠä¸­æ–‡ç¿»è¯‘æˆè‹±æ–‡

Agent: å¥½çš„ï¼Œæˆ‘æ¥ä¸ºä½ åˆ›å»ºç¿»è¯‘æŠ€èƒ½...
       [è°ƒç”¨ skill-creator æŠ€èƒ½]
       âœ… å·²åˆ›å»º skills/translator/SKILL.md
       ç°åœ¨ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ç¿»è¯‘åŠŸèƒ½äº†ï¼
```

æ— éœ€æ‰‹åŠ¨åˆ›å»ºæ–‡ä»¶ã€æ— éœ€ç¼–å†™ä»£ç ï¼Œ**ä¸€å¥è¯å°±èƒ½æ‰©å±• Agent èƒ½åŠ›**ï¼

---

## å…­ã€LangChain 1.2 æ¶æ„å®è·µ

FinchBot åŸºäº **LangChain v1.2** å’Œ **LangGraph v1.0** æ„å»ºï¼Œé‡‡ç”¨æœ€æ–°çš„ Agent æ¶æ„ã€‚

### 6.1 Agent åˆ›å»ºæµç¨‹

```python
from langchain.agents import create_agent
from langgraph.checkpoint.sqlite import SqliteSaver

def create_finch_agent(
    model: BaseChatModel,
    workspace: Path,
    tools: Sequence[BaseTool] | None = None,
    use_persistent: bool = True,
) -> tuple[CompiledStateGraph, SqliteSaver | MemorySaver]:
  
    # 1. åˆå§‹åŒ–æ£€æŸ¥ç‚¹ï¼ˆæŒä¹…åŒ–çŠ¶æ€ï¼‰
    if use_persistent:
        checkpointer = SqliteSaver.from_conn_string(str(db_path))
    else:
        checkpointer = MemorySaver()
  
    # 2. æ„å»ºç³»ç»Ÿæç¤º
    system_prompt = build_system_prompt(workspace)
  
    # 3. åˆ›å»º Agentï¼ˆä½¿ç”¨ LangChain å®˜æ–¹ APIï¼‰
    agent = create_agent(
        model=model,
        tools=list(tools) if tools else None,
        system_prompt=system_prompt,
        checkpointer=checkpointer,
    )
  
    return agent, checkpointer
```

### 6.2 LangGraph çŠ¶æ€ç®¡ç†

```mermaid
flowchart LR
    A[ç”¨æˆ·è¾“å…¥] --> B[åŠ è½½ Checkpoint]
    B --> C[æ„å»º Prompt]
    C --> D[LLM æ¨ç†]
    D --> E{éœ€è¦å·¥å…·?}
    E -->|å¦| F[ç”Ÿæˆå›å¤]
    E -->|æ˜¯| G[æ‰§è¡Œå·¥å…·]
    G --> D
    F --> H[ä¿å­˜ Checkpoint]
    H --> I[è¿”å›ç”¨æˆ·]
```

### 6.3 æ”¯æŒçš„ LLM æä¾›å•†

|  æä¾›å•†  | æ¨¡å‹                      | ç‰¹ç‚¹             |
| :-------: | :------------------------ | :--------------- |
|  OpenAI  | GPT-5, GPT-5.2, O3-mini     | ç»¼åˆèƒ½åŠ›æœ€å¼º     |
| Anthropic | Claude Sonnet 4.5, Opus 4.6 | å®‰å…¨æ€§é«˜ï¼Œé•¿æ–‡æœ¬ |
| DeepSeek | DeepSeek Chat, Reasoner           | å›½äº§ï¼Œæ€§ä»·æ¯”é«˜   |
|  Gemini  | Gemini 2.5 Flash      | Google æœ€æ–°      |
|   Groq   | Llama 4 Scout/Maverick          | æé€Ÿæ¨ç†         |
| Moonshot | Kimi K1.5/K2.5            | é•¿æ–‡æœ¬ï¼Œå›½äº§     |

---

## ä¸ƒã€æ€»ç»“

FinchBot ä¸æ˜¯ä¸€ä¸ªç®€å•çš„ LLM å°è£…ï¼Œè€Œæ˜¯ä¸€ä¸ªæ·±æ€ç†Ÿè™‘çš„ Agent æ¡†æ¶è®¾è®¡ï¼š

|       æ ¸å¿ƒç‰¹æ€§       | è®¾è®¡äº®ç‚¹                                        |
| :------------------: | :---------------------------------------------- |
|  **æ¶æ„é©æ–°**  | å·¥å‚æ¨¡å¼è§£è€¦ï¼Œé«˜å†…èšä½è€¦åˆ                      |
|  **è®°å¿†æ¶æ„**  | åŒå±‚å­˜å‚¨ï¼ŒAgentic RAGï¼ŒåŠ æƒ RRF                 |
| **æç¤ºè¯ç³»ç»Ÿ** | æ–‡ä»¶ç³»ç»Ÿï¼Œçƒ­åŠ è½½ï¼Œæ¨¡å—åŒ–ç»„è£…                    |
|  **å·¥å…·ç³»ç»Ÿ**  | æ³¨å†Œè¡¨æ¨¡å¼ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œ11 ä¸ªå†…ç½®å·¥å…·ï¼Œä¸‰å¼•æ“é™çº§ |
|  **æŠ€èƒ½ç³»ç»Ÿ**  | Markdown å®šä¹‰ï¼ŒAgent è‡ªåŠ¨åˆ›å»ºï¼Œå¼€ç®±å³ç”¨         |
|  **æ¶æ„å®è·µ**  | LangChain v1.2ï¼ŒLangGraph v1.0                  |
|  **å¼€ç®±å³ç”¨**  | ç¯å¢ƒå˜é‡é…ç½®ï¼ŒRich CLIï¼Œi18nï¼Œè‡ªåŠ¨é™çº§          |

å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªï¼š

* âœ… éšç§ä¼˜å…ˆï¼ˆæœ¬åœ° Embeddingï¼‰
* âœ… çœŸæŒä¹…åŒ–ï¼ˆåŒå±‚è®°å¿†ï¼‰
* âœ… ç”Ÿäº§çº§ç¨³å®šï¼ˆå®Œå–„çš„é”™è¯¯å¤„ç†ï¼‰
* âœ… çµæ´»æ‰©å±•ï¼ˆæŠ€èƒ½ + å·¥å…·åŒå±‚ï¼‰
* âœ… æœ€æ–°æ¶æ„ï¼ˆLangChain 1.2 + LangGraphï¼‰
* âœ… å¼€ç®±å³ç”¨ï¼ˆé›¶é…ç½®å¯åŠ¨ï¼Œè‡ªåŠ¨é™çº§ï¼‰

çš„ AI Agent æ¡†æ¶ï¼ŒFinchBot å€¼å¾—ä¸€è¯•ã€‚

---

## ç›¸å…³é“¾æ¥

* ğŸ“¦ **é¡¹ç›®åœ°å€**: [GitHub - FinchBot](https://github.com/xt765/finchbot)
* ğŸ“– **æ–‡æ¡£**: [FinchBot æ–‡æ¡£](https://github.com/xt765/finchbot/tree/main/docs)
* ğŸ’¬ **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/xt765/finchbot/issues)

---

> å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Star â­ï¸
